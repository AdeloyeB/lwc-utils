<template>
    <c-message-service boundary={uniqueBoundary}></c-message-service>

    <lightning-card>
        <div slot="title">
            <slot name="title">
                <template if:true={showRecordCount}>
                    {title} ({recordCount})
                </template>
                <template if:false={showRecordCount}>
                    {title}
                </template>
            </slot>
        </div>
        <div class={containerClass}>
            <template if:true={showSpinner}>
                <lightning-spinner alternative-text="Loading"></lightning-spinner>
            </template>
            <c-datatable-extension
                key-field={keyField}
                hide-checkbox-column={isHideCheckbox}
                max-row-selection={maxRowSelection}
                data={tableData}
                columns={tableColumns}
                column-widths-mode={columnWidthsMode}
                onrowselection={handleRowSelection}
                onrowaction={handleRowAction}
                onsort={handleColumnSorting}
                sorted-by={sortedBy}
                sorted-direction={sortedDirection}
                draft-values={draftValues}
                oncellchange={handleCellChange}
                oncancel={handleCancel}
                onsave={handleSave}
                errors={saveErrors}
            ></c-datatable-extension>
        </div>
        <div slot="actions">
            <lightning-layout if:true={hasActions} horizontal-align="end" vertical-align="end" pull-to-boundary="small">
                <template if:true={showRefreshButton}>
                    <lightning-layout-item class={refreshClass}>
                        <lightning-button-icon
                            alternative-text="Refresh"
                            icon-name="utility:refresh"
                            onclick={handleRefresh}
                        ></lightning-button-icon>
                    </lightning-layout-item>
                </template>
                <template if:true={showTableActions}>
                    <lightning-layout-item class="slds-p-left_x-small slds-p-right_small">
                        <lightning-button-group>
                            <template if:true={hasPrimaryAction}>
                                <lightning-button
                                    data-dialog-size={primaryConfig.Dialog_Size__c}
                                    data-type={primaryConfig.Type__c}
                                    name={primaryActionName}
                                    label={primaryConfig.Button_Label__c}
                                    onclick={handleTableAction}
                                ></lightning-button>
                            </template>
                            <template if:true={hasSecondaryAction}>
                                <lightning-button
                                    data-dialog-size={secondaryConfig.Dialog_Size__c}
                                    data-type={secondaryConfig.Type__c}
                                    name={secondaryActionName}
                                    label={secondaryConfig.Button_Label__c}
                                    onclick={handleTableAction}
                                ></lightning-button>
                            </template>
                        </lightning-button-group>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
        </div>
    </lightning-card>
</template>
